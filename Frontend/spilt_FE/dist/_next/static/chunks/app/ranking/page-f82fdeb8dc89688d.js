(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[901],{9225:function(e,t,n){Promise.resolve().then(n.bind(n,1799))},1799:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var r=n(57437),s=n(2265),a=n(84028),o=n(22993),i=n(61711);function l(e){return(0,r.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,r.jsx)("path",{d:"M3.5 10L8 5.5L12.5 10",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}function c(e){return(0,r.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,r.jsx)("path",{d:"M3.5 6L8 10.5L12.5 6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}function d(e){let{sortField:t,sortOrder:n,onSortFieldChange:s}=e;return(0,r.jsx)("div",{className:"flex items-center justify-between px-2 mb-6",children:(0,r.jsxs)("div",{className:"grid grid-cols-4 w-full text-sm",children:[(0,r.jsx)("div",{className:"text-[#A2A2A7]",children:"Rank"}),(0,r.jsx)("div",{className:"text-[#A2A2A7]",children:"User"}),(0,r.jsx)("div",{className:"flex items-center gap-2",children:(0,r.jsxs)("button",{onClick:()=>s("poseAvgscore"),className:"".concat("poseAvgscore"===t?"text-[#0066FF]":"text-[#A2A2A7]"," hover:text-[#0066FF] transition-colors flex items-center gap-1"),children:["Avg Score","poseAvgscore"===t&&("asc"===n?(0,r.jsx)(l,{className:"w-4 h-4"}):(0,r.jsx)(c,{className:"w-4 h-4"}))]})}),(0,r.jsx)("div",{className:"flex items-center gap-2",children:(0,r.jsxs)("button",{onClick:()=>s("poseHighscore"),className:"".concat("poseHighscore"===t?"text-[#0066FF]":"text-[#A2A2A7]"," hover:text-[#0066FF] transition-colors flex items-center gap-1"),children:["High Score","poseHighscore"===t&&("asc"===n?(0,r.jsx)(l,{className:"w-4 h-4"}):(0,r.jsx)(c,{className:"w-4 h-4"}))]})})]})})}var u=n(26110);function f(e){let{isOpen:t,onClose:n,userName:a,videoUrl:o}=e,[i,l]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{l(!1)},[]),(0,r.jsx)(u.Vq,{open:t,onOpenChange:n,children:(0,r.jsxs)(u.cZ,{className:"sm:max-w-[600px] bg-[#1E1E2D] border-[#2E2E3D]",children:[(0,r.jsx)(u.fK,{children:(0,r.jsxs)(u.$N,{className:"text-2xl font-bold text-white",children:[a,"'s Highlight"]})}),(0,r.jsx)("div",{className:"mt-4",children:i?(0,r.jsx)("div",{className:"w-full h-[300px] flex items-center justify-center bg-[#161622] rounded-lg text-[#A2A2A7]",children:"Failed to load video"}):(0,r.jsx)("video",{src:o,controls:!0,className:"w-full rounded-lg",onError:()=>{l(!0)},controlsList:"nodownload",children:"Your browser does not support the video tag."})})]})})}var x=n(64014);function p(e){let{rankings:t,currentUserNickname:n,hasMore:a,isLoading:o,onLoadMore:i}=e,l=(0,s.useRef)(),[c,d]=(0,s.useState)(null),u=(0,s.useCallback)(e=>{!o&&(l.current&&l.current.disconnect(),l.current=new IntersectionObserver(e=>{e[0].isIntersecting&&a&&i()}),e&&l.current.observe(e))},[o,a,i]),p=e=>{d(e)};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"space-y-2",children:[t.map((e,s)=>{let a=s===t.length-1,o=null!==n&&e.nickname===n;return(0,r.jsx)("div",{ref:a?u:null,className:"p-4 rounded-lg transition-transform transform hover:scale-[1.02] ".concat(o?"bg-[#0066FF]/10":"bg-[#1E1E2D]"),children:(0,r.jsxs)("div",{className:"grid grid-cols-4 items-center",children:[(0,r.jsx)("div",{className:"font-medium ".concat(function(e){switch(e){case 0:return"text-yellow-400";case 1:return"text-gray-400";case 2:return"text-amber-700";default:return"text-white"}}(s)),children:function(e){switch(e){case 0:return"1st";case 1:return"2nd";case 2:return"3rd";default:return"".concat(e+1,"th")}}(s)}),(0,r.jsxs)("div",{className:"overflow-hidden",children:[(0,r.jsx)("button",{onClick:()=>p(e),className:"font-medium text-white hover:text-[#0066FF] transition-colors truncate text-left",children:e.nickname}),(0,r.jsx)("div",{className:"text-xs text-[#A2A2A7] truncate",children:(0,x.WU)(new Date(e.gameDate),"yyyy-MM-dd")})]}),(0,r.jsx)("div",{className:"text-white text-center",children:e.poseAvgscore.toFixed(1)}),(0,r.jsx)("div",{className:"text-white text-center",children:e.poseHighscore.toFixed(1)})]})},"".concat(e.gameId,"-").concat(e.userId))}),o&&(0,r.jsx)("div",{className:"p-4 text-center",children:(0,r.jsx)("div",{className:"inline-block h-6 w-6 animate-spin rounded-full border-2 border-[#0066FF] border-t-transparent"})})]}),c&&(0,r.jsx)(f,{isOpen:!!c,onClose:()=>{d(null)},userName:c.nickname,videoUrl:c.highlight})]})}var m=n(29116),g=n(14438);function h(){let[e,t]=(0,s.useState)("poseHighscore"),[n,l]=(0,s.useState)("desc"),[c,u]=(0,s.useState)([]),[f,x]=(0,s.useState)(!1),[h,v]=(0,s.useState)(!0),[j,N]=(0,s.useState)(1),[w,b]=(0,s.useState)(null),y=(0,s.useCallback)(async t=>{x(!0),b(null);try{let r=await m.Z.get("rank");if("SUCCESS"===r.data.code){let s=r.data.data||[],a=[...s].sort((t,r)=>{let s=t[e]-r[e];return"asc"===n?s:-s}),o=(t-1)*20,i=a.slice(o,o+20);1===t?u(i):u(e=>[...e,...i]),v(s.length>o+20)}}catch(e){var r;(null===(r=e.response)||void 0===r?void 0:r.status)===404?(b("No ranking data available"),g.Am.error("No ranking data available")):(b("Failed to load rankings"),g.Am.error("Failed to load rankings")),v(!1)}finally{x(!1)}},[e,n]);(0,s.useEffect)(()=>{y(1)},[y]);let k=(0,s.useCallback)(()=>{!f&&h&&N(e=>{let t=e+1;return y(t),t})},[f,h,y]);return(0,r.jsxs)("div",{className:"min-h-screen bg-[#161622] p-6 pb-24",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,r.jsx)(a.Z,{}),(0,r.jsx)(o.I,{})]}),(0,r.jsxs)("div",{className:"max-w-2xl mx-auto",children:[null,(0,r.jsx)(d,{sortField:e,sortOrder:n,onSortFieldChange:r=>{r===e?l("asc"===n?"desc":"asc"):(t(r),l("desc")),N(1),u([]),y(1)}}),w?(0,r.jsx)("div",{className:"text-center text-[#A2A2A7] py-8",children:w}):(0,r.jsx)(p,{rankings:c,currentUserNickname:void 0,hasMore:h,isLoading:f,onLoadMore:k})]}),(0,r.jsx)(i.v,{})]})}},26110:function(e,t,n){"use strict";n.d(t,{$N:function(){return x},Be:function(){return p},Vq:function(){return l},cZ:function(){return u},fK:function(){return f}});var r=n(57437),s=n(2265),a=n(49027),o=n(32489),i=n(94508);let l=a.fC;a.xz;let c=a.h_;a.x8;let d=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)(a.aV,{ref:t,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...s})});d.displayName=a.aV.displayName;let u=s.forwardRef((e,t)=>{let{className:n,children:s,...l}=e;return(0,r.jsxs)(c,{children:[(0,r.jsx)(d,{}),(0,r.jsxs)(a.VY,{ref:t,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...l,children:[s,(0,r.jsxs)(a.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(o.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});u.displayName=a.VY.displayName;let f=e=>{let{className:t,...n}=e;return(0,r.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...n})};f.displayName="DialogHeader";let x=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)(a.Dx,{ref:t,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",n),...s})});x.displayName=a.Dx.displayName;let p=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)(a.dk,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",n),...s})});p.displayName=a.dk.displayName},32489:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r=(0,n(79205).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},49027:function(e,t,n){"use strict";n.d(t,{Dx:function(){return en},VY:function(){return et},aV:function(){return ee},dk:function(){return er},fC:function(){return G},h_:function(){return Q},x8:function(){return es},xz:function(){return J}});var r=n(2265),s=n(6741),a=n(98575),o=n(73966),i=n(99255),l=n(80886),c=n(15278),d=n(99103),u=n(83832),f=n(71599),x=n(66840),p=n(86097),m=n(99157),g=n(5478),h=n(37053),v=n(57437),j="Dialog",[N,w]=(0,o.b)(j),[b,y]=N(j),k=e=>{let{__scopeDialog:t,children:n,open:s,defaultOpen:a,onOpenChange:o,modal:c=!0}=e,d=r.useRef(null),u=r.useRef(null),[f=!1,x]=(0,l.T)({prop:s,defaultProp:a,onChange:o});return(0,v.jsx)(b,{scope:t,triggerRef:d,contentRef:u,contentId:(0,i.M)(),titleId:(0,i.M)(),descriptionId:(0,i.M)(),open:f,onOpenChange:x,onOpenToggle:r.useCallback(()=>x(e=>!e),[x]),modal:c,children:n})};k.displayName=j;var D="DialogTrigger",C=r.forwardRef((e,t)=>{let{__scopeDialog:n,...r}=e,o=y(D,n),i=(0,a.e)(t,o.triggerRef);return(0,v.jsx)(x.WV.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":U(o.open),...r,ref:i,onClick:(0,s.M)(e.onClick,o.onOpenToggle)})});C.displayName=D;var A="DialogPortal",[F,R]=N(A,{forceMount:void 0}),E=e=>{let{__scopeDialog:t,forceMount:n,children:s,container:a}=e,o=y(A,t);return(0,v.jsx)(F,{scope:t,forceMount:n,children:r.Children.map(s,e=>(0,v.jsx)(f.z,{present:n||o.open,children:(0,v.jsx)(u.h,{asChild:!0,container:a,children:e})}))})};E.displayName=A;var I="DialogOverlay",M=r.forwardRef((e,t)=>{let n=R(I,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,a=y(I,e.__scopeDialog);return a.modal?(0,v.jsx)(f.z,{present:r||a.open,children:(0,v.jsx)(O,{...s,ref:t})}):null});M.displayName=I;var O=r.forwardRef((e,t)=>{let{__scopeDialog:n,...r}=e,s=y(I,n);return(0,v.jsx)(m.Z,{as:h.g7,allowPinchZoom:!0,shards:[s.contentRef],children:(0,v.jsx)(x.WV.div,{"data-state":U(s.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),_="DialogContent",S=r.forwardRef((e,t)=>{let n=R(_,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,a=y(_,e.__scopeDialog);return(0,v.jsx)(f.z,{present:r||a.open,children:a.modal?(0,v.jsx)(V,{...s,ref:t}):(0,v.jsx)(W,{...s,ref:t})})});S.displayName=_;var V=r.forwardRef((e,t)=>{let n=y(_,e.__scopeDialog),o=r.useRef(null),i=(0,a.e)(t,n.contentRef,o);return r.useEffect(()=>{let e=o.current;if(e)return(0,g.Ry)(e)},[]),(0,v.jsx)(L,{...e,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,s.M)(e.onCloseAutoFocus,e=>{var t;e.preventDefault(),null===(t=n.triggerRef.current)||void 0===t||t.focus()}),onPointerDownOutside:(0,s.M)(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey;(2===t.button||n)&&e.preventDefault()}),onFocusOutside:(0,s.M)(e.onFocusOutside,e=>e.preventDefault())})}),W=r.forwardRef((e,t)=>{let n=y(_,e.__scopeDialog),s=r.useRef(!1),a=r.useRef(!1);return(0,v.jsx)(L,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{var r,o;null===(r=e.onCloseAutoFocus)||void 0===r||r.call(e,t),t.defaultPrevented||(s.current||null===(o=n.triggerRef.current)||void 0===o||o.focus(),t.preventDefault()),s.current=!1,a.current=!1},onInteractOutside:t=>{var r,o;null===(r=e.onInteractOutside)||void 0===r||r.call(e,t),t.defaultPrevented||(s.current=!0,"pointerdown"!==t.detail.originalEvent.type||(a.current=!0));let i=t.target;(null===(o=n.triggerRef.current)||void 0===o?void 0:o.contains(i))&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&a.current&&t.preventDefault()}})}),L=r.forwardRef((e,t)=>{let{__scopeDialog:n,trapFocus:s,onOpenAutoFocus:o,onCloseAutoFocus:i,...l}=e,u=y(_,n),f=r.useRef(null),x=(0,a.e)(t,f);return(0,p.EW)(),(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(d.M,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:o,onUnmountAutoFocus:i,children:(0,v.jsx)(c.XB,{role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":U(u.open),...l,ref:x,onDismiss:()=>u.onOpenChange(!1)})}),(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(X,{titleId:u.titleId}),(0,v.jsx)($,{contentRef:f,descriptionId:u.descriptionId})]})]})}),P="DialogTitle",z=r.forwardRef((e,t)=>{let{__scopeDialog:n,...r}=e,s=y(P,n);return(0,v.jsx)(x.WV.h2,{id:s.titleId,...r,ref:t})});z.displayName=P;var H="DialogDescription",Z=r.forwardRef((e,t)=>{let{__scopeDialog:n,...r}=e,s=y(H,n);return(0,v.jsx)(x.WV.p,{id:s.descriptionId,...r,ref:t})});Z.displayName=H;var B="DialogClose",T=r.forwardRef((e,t)=>{let{__scopeDialog:n,...r}=e,a=y(B,n);return(0,v.jsx)(x.WV.button,{type:"button",...r,ref:t,onClick:(0,s.M)(e.onClick,()=>a.onOpenChange(!1))})});function U(e){return e?"open":"closed"}T.displayName=B;var Y="DialogTitleWarning",[q,K]=(0,o.k)(Y,{contentName:_,titleName:P,docsSlug:"dialog"}),X=e=>{let{titleId:t}=e,n=K(Y),s="`".concat(n.contentName,"` requires a `").concat(n.titleName,"` for the component to be accessible for screen reader users.\n\nIf you want to hide the `").concat(n.titleName,"`, you can wrap it with our VisuallyHidden component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/").concat(n.docsSlug);return r.useEffect(()=>{t&&!document.getElementById(t)&&console.error(s)},[s,t]),null},$=e=>{let{contentRef:t,descriptionId:n}=e,s=K("DialogDescriptionWarning"),a="Warning: Missing `Description` or `aria-describedby={undefined}` for {".concat(s.contentName,"}.");return r.useEffect(()=>{var e;let r=null===(e=t.current)||void 0===e?void 0:e.getAttribute("aria-describedby");n&&r&&!document.getElementById(n)&&console.warn(a)},[a,t,n]),null},G=k,J=C,Q=E,ee=M,et=S,en=z,er=Z,es=T}},function(e){e.O(0,[443,303,132,514,503,648,382,14,116,642,971,117,744],function(){return e(e.s=9225)}),_N_E=e.O()}]);