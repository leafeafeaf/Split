(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[491],{79767:function(e,s,t){Promise.resolve().then(t.bind(t,27432))},27432:function(e,s,t){"use strict";t.d(s,{default:function(){return f}});var l=t(57437),c=t(2265),i=t(99376),a=t(92451);let n=(0,t(79205).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);var r=t(84028),d=t(65452),o=t(40133),x=t(66070),h=t(9074),m=t(29948),u=t(60431),p=t(26637),j=t(46444),v=t(14438);function f(e){let{params:s}=e,t=(0,i.useRouter)(),f=(0,m.T)(),{currentSerial:b}=(0,m.C)(e=>e.device),{currentFrame:N,isLoading:g,error:y}=(0,m.C)(e=>e.frame),{user:w,highlightUpdateLoading:k}=(0,m.C)(e=>e.user),[C,A]=(0,c.useState)(!1),[E,S]=(0,c.useState)(!1);(0,c.useEffect)(()=>{if(!b){v.Am.error("No device connected"),t.push("/check");return}let e=Number.parseInt(s.id);return f((0,u.cJ)({serial:b,frameNum:e})),()=>{f((0,u.rX)())}},[b,s.id,f,t]);let D=()=>t.back(),Z=async()=>{if(null==N?void 0:N.video){A(!0);try{let e=document.createElement("a");e.href=N.video,e.download="frame-".concat(N.num,".mp4"),document.body.appendChild(e),e.click(),document.body.removeChild(e),v.Am.success("Video saved successfully!")}catch(e){v.Am.error("Failed to save video")}finally{A(!1)}}},_=async()=>{if((null==N?void 0:N.video)&&w)try{let e=!!w.highlight;await f((0,p.Pb)({highlight:N.video,isUpdate:e})).unwrap(),v.Am.success("Highlight video ".concat(e?"updated":"set"," successfully!")),S(!1)}catch(e){"string"==typeof e?v.Am.error(e):v.Am.error("Failed to set highlight video")}};return g?(0,l.jsx)("div",{className:"min-h-screen bg-[#161622] p-6 flex items-center justify-center",children:(0,l.jsx)("div",{className:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-[#0066FF] border-r-transparent"})}):y||!N?(0,l.jsxs)("div",{className:"min-h-screen bg-[#161622] p-6",children:[(0,l.jsx)("button",{onClick:D,className:"text-white hover:text-[#A2A2A7] transition-colors",children:(0,l.jsx)(a.Z,{className:"h-8 w-8"})}),(0,l.jsx)("div",{className:"flex items-center justify-center h-[calc(100vh-100px)]",children:(0,l.jsx)(x.Z,{className:"p-6 bg-[#1E1E2D]",children:(0,l.jsx)("p",{className:"text-white",children:y||"Failed to load frame data"})})})]}):(0,l.jsxs)("div",{className:"min-h-screen bg-[#161622] p-6 pb-24",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,l.jsx)("button",{onClick:D,className:"text-white hover:text-[#A2A2A7] transition-colors",children:(0,l.jsx)(a.Z,{className:"h-8 w-8"})}),(0,l.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,l.jsx)(r.Z,{}),(0,l.jsx)(d.Z,{})]})]}),(0,l.jsxs)("div",{className:"max-w-2xl mx-auto space-y-8",children:[(0,l.jsxs)("h1",{className:"text-3xl font-bold text-white text-center",children:[N.num," Set"]}),(0,l.jsx)(o.x,{data:{angle:N.elbowAngleScore,stability:N.armStabilityScore,speed:N.speed}}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsx)("h2",{className:"text-2xl text-white text-center font-medium",children:"Statistics"}),(0,l.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,l.jsxs)("div",{className:"bg-[#1E1E2D] p-4 rounded-lg",children:[(0,l.jsx)("p",{className:"text-[#9CB1D1] text-center text-sm",children:"Angle"}),(0,l.jsx)("p",{className:"text-2xl font-bold text-white text-center",children:N.elbowAngleScore})]}),(0,l.jsxs)("div",{className:"bg-[#1E1E2D] p-4 rounded-lg",children:[(0,l.jsx)("p",{className:"text-[#9CB1D1] text-center text-sm",children:"Stability"}),(0,l.jsx)("p",{className:"text-2xl font-bold text-white text-center",children:N.armStabilityScore})]}),(0,l.jsxs)("div",{className:"bg-[#1E1E2D] p-4 rounded-lg",children:[(0,l.jsx)("p",{className:"text-[#9CB1D1] text-center text-sm",children:"Score"}),(0,l.jsx)("p",{className:"text-2xl font-bold text-white text-center",children:N.poseScore})]})]})]}),(0,l.jsx)(x.Z,{className:"bg-[#1E1E2D] p-6",children:(0,l.jsxs)("div",{className:"space-y-4 text-center",children:[(0,l.jsx)("p",{className:"text-red-500 text-xl mb-2",children:"AI Comment"}),(0,l.jsx)("p",{className:"text-white text-lg",children:N.feedback})]})}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsx)("h2",{className:"text-2xl text-white text-center font-medium",children:"Highlight"}),(0,l.jsxs)(x.Z,{className:"bg-[#1E1E2D] p-6 space-y-4",children:[(0,l.jsx)("div",{className:"aspect-video rounded-lg overflow-hidden bg-black",children:(0,l.jsx)("video",{src:N.video,controls:!0,className:"w-full h-full object-contain"})}),(0,l.jsxs)(h.D,{onClick:Z,disabled:C,className:"w-full",children:[C?"Saving...":"Save Video",(0,l.jsx)(n,{className:"ml-2 h-4 w-4"})]})]})]}),(0,l.jsx)(h.D,{onClick:()=>{S(!0)},disabled:k,className:"w-full py-4",children:k?"Setting...":"".concat((null==w?void 0:w.highlight)?"하이라이트 영상 수정":"하이라이트 영상 지정")})]}),(0,l.jsx)(j.A,{isOpen:E,onClose:()=>S(!1),onConfirm:_})]})}},92451:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});let l=(0,t(79205).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])}},function(e){e.O(0,[443,303,166,514,575,719,358,116,969,971,117,744],function(){return e(e.s=79767)}),_N_E=e.O()}]);