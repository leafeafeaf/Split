(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[737],{64718:function(e,t,n){Promise.resolve().then(n.bind(n,46243))},46243:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return D}});var r=n(57437),s=n(2265),i=n(99376),l=n(84028),a=n(22993),o=n(61711),c=n(35166),u=n(94508);function d(e){let{imageUrl:t,isSelected:n,onClick:s}=e;return(0,r.jsx)(c.E.button,{whileTap:{scale:.95},onClick:s,className:(0,u.cn)("relative w-full aspect-[3/4] rounded-xl overflow-hidden","bg-gradient-to-b from-[#D1D1D1] to-[#A8A8A8]",n&&"ring-2 ring-[#0066FF]"),children:(0,r.jsx)("img",{src:t||"/placeholder.svg",alt:"Bowling posture",className:"w-full h-full object-contain"})})}function f(e){let{isRightHand:t,onToggle:n}=e;return(0,r.jsxs)("button",{onClick:n,className:"relative w-12 h-6 rounded-full border-2 border-white","aria-label":"Toggle throwing hand",children:[(0,r.jsx)(c.E.div,{className:"absolute top-0.5 left-0.5 w-4 h-4 bg-white rounded-full",animate:{x:t?24:0},transition:{type:"spring",stiffness:500,damping:30}}),(0,r.jsx)("span",{className:"sr-only",children:t?"Right hand":"Left hand"})]})}var m=n(9074),h=n(58881),p=n(53576),x=n(64252),g=n(45750);class v extends s.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=t.offsetParent,n=e instanceof HTMLElement&&e.offsetWidth||0,r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft,r.right=n-r.width-r.left}return null}componentDidUpdate(){}render(){return this.props.children}}function b(e){let{children:t,isPresent:n,anchorX:i}=e,l=(0,s.useId)(),a=(0,s.useRef)(null),o=(0,s.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=(0,s.useContext)(g._);return(0,s.useInsertionEffect)(()=>{let{width:e,height:t,top:r,left:s,right:u}=o.current;if(n||!a.current||!e||!t)return;a.current.dataset.motionPopId=l;let d=document.createElement("style");return c&&(d.nonce=c),document.head.appendChild(d),d.sheet&&d.sheet.insertRule('\n          [data-motion-pop-id="'.concat(l,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            ").concat("left"===i?"left: ".concat(s):"right: ".concat(u),"px !important;\n            top: ").concat(r,"px !important;\n          }\n        ")),()=>{document.head.removeChild(d)}},[n]),(0,r.jsx)(v,{isPresent:n,childRef:a,sizeRef:o,children:s.cloneElement(t,{ref:a})})}let j=e=>{let{children:t,initial:n,isPresent:i,onExitComplete:l,custom:a,presenceAffectsLayout:o,mode:c,anchorX:u}=e,d=(0,p.h)(y),f=(0,s.useId)(),m=(0,s.useCallback)(e=>{for(let t of(d.set(e,!0),d.values()))if(!t)return;l&&l()},[d,l]),h=(0,s.useMemo)(()=>({id:f,initial:n,isPresent:i,custom:a,onExitComplete:m,register:e=>(d.set(e,!1),()=>d.delete(e))}),o?[Math.random(),m]:[i,m]);return(0,s.useMemo)(()=>{d.forEach((e,t)=>d.set(t,!1))},[i]),s.useEffect(()=>{i||d.size||!l||l()},[i]),"popLayout"===c&&(t=(0,r.jsx)(b,{isPresent:i,anchorX:u,children:t})),(0,r.jsx)(x.O.Provider,{value:h,children:t})};function y(){return new Map}var w=n(49637);let N=e=>e.key||"";function E(e){let t=[];return s.Children.forEach(e,e=>{(0,s.isValidElement)(e)&&t.push(e)}),t}var C=n(11534);let k=e=>{let{children:t,custom:n,initial:i=!0,onExitComplete:l,presenceAffectsLayout:a=!0,mode:o="sync",propagate:c=!1,anchorX:u="left"}=e,[d,f]=(0,w.oO)(c),m=(0,s.useMemo)(()=>E(t),[t]),x=c&&!d?[]:m.map(N),g=(0,s.useRef)(!0),v=(0,s.useRef)(m),b=(0,p.h)(()=>new Map),[y,k]=(0,s.useState)(m),[A,R]=(0,s.useState)(m);(0,C.L)(()=>{g.current=!1,v.current=m;for(let e=0;e<A.length;e++){let t=N(A[e]);x.includes(t)?b.delete(t):!0!==b.get(t)&&b.set(t,!1)}},[A,x.length,x.join("-")]);let S=[];if(m!==y){let e=[...m];for(let t=0;t<A.length;t++){let n=A[t],r=N(n);x.includes(r)||(e.splice(t,0,n),S.push(n))}return"wait"===o&&S.length&&(e=S),R(E(e)),k(m),null}let{forceRender:F}=(0,s.useContext)(h.p);return(0,r.jsx)(r.Fragment,{children:A.map(e=>{let t=N(e),s=(!c||!!d)&&(m===A||x.includes(t));return(0,r.jsx)(j,{isPresent:s,initial:(!g.current||!!i)&&void 0,custom:n,presenceAffectsLayout:a,mode:o,onExitComplete:s?void 0:()=>{if(!b.has(t))return;b.set(t,!0);let e=!0;b.forEach(t=>{t||(e=!1)}),e&&(null==F||F(),R(v.current),c&&(null==f||f()),l&&l())},anchorX:u,children:e},t)})})};var A=n(29948),R=n(99837),S=n(14438);function F(e){let{isOpen:t,onClose:n,onSubmit:i}=e,[l,a]=(0,s.useState)(""),o=(0,A.T)(),{isLoading:u,error:d}=(0,A.C)(e=>e.device),f=async e=>{if(e.preventDefault(),l.trim())try{await o((0,R.Ky)(l.trim())).unwrap(),i(l.trim()),n()}catch(e){"string"==typeof e?S.Am.error(e):S.Am.error("Failed to start measurement")}};return(0,r.jsx)(k,{children:t&&(0,r.jsx)(c.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:n,children:(0,r.jsxs)(c.E.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-gradient-to-br from-[#1E1E2D] to-[#161622] p-6 rounded-2xl shadow-xl w-full max-w-md",onClick:e=>e.stopPropagation(),children:[(0,r.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,r.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Serial Number"})}),(0,r.jsxs)("form",{onSubmit:f,className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"serialNumber",className:"block text-sm font-medium text-[#A2A2A7] mb-2",children:"Enter Serial Number"}),(0,r.jsx)("input",{type:"text",id:"serialNumber",value:l,onChange:e=>a(e.target.value),className:"w-full px-4 py-2 bg-[#2E2E3D] text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-[#0066FF] transition-all",required:!0,disabled:u})]}),d&&(0,r.jsx)("p",{className:"text-red-500 text-sm",children:d}),(0,r.jsx)(m.D,{type:"submit",className:"w-full py-3 text-lg font-medium",disabled:u,children:u?"Connecting...":"Submit"})]})]})})})}let P=Array.from({length:9},(e,t)=>({id:t+1,imageUrl:"/placeholder.svg?height=400&width=300&text=Posture".concat(t+1)}));function D(){let e=(0,i.useRouter)(),[t,n]=(0,s.useState)(null),[c,u]=(0,s.useState)(!0),[h,p]=(0,s.useState)(0),[x,g]=(0,s.useState)(!1),{currentSerial:v}=(0,A.C)(e=>e.device);return(0,r.jsxs)("div",{className:"min-h-screen bg-[#161622] p-6 pb-24",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,r.jsx)(l.Z,{}),(0,r.jsx)(a.I,{})]}),(0,r.jsxs)("div",{className:"max-w-md mx-auto space-y-8",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"overflow-x-auto scrollbar-hide",children:(0,r.jsx)("div",{className:"grid grid-cols-3 gap-4 min-w-full",children:P.map(e=>(0,r.jsx)("div",{className:"w-[120px]",children:(0,r.jsx)(d,{imageUrl:e.imageUrl,isSelected:t===e.id,onClick:()=>n(e.id)})},e.id))})}),(0,r.jsxs)("div",{className:"absolute bottom-[-24px] right-0 flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-[#A2A2A7] text-sm",children:"Left"}),(0,r.jsx)(f,{isRightHand:c,onToggle:()=>u(!c)}),(0,r.jsx)("span",{className:"text-[#A2A2A7] text-sm",children:"Right"})]})]}),(0,r.jsx)("div",{className:"flex justify-center gap-2 mt-8",children:Array.from({length:3},(e,t)=>(0,r.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(h===t?"bg-[#0066FF]":"bg-[#2E2E3D]")},t))}),(0,r.jsx)(m.D,{onClick:()=>{if(null===t){alert("Please select a posture first");return}g(!0)},className:"w-full py-6 text-lg font-medium",children:"측정 시작"})]}),(0,r.jsx)(o.v,{}),(0,r.jsx)(F,{isOpen:x,onClose:()=>g(!1),onSubmit:t=>{e.push("/check/measure")}})]})}},29948:function(e,t,n){"use strict";n.d(t,{C:function(){return i},T:function(){return s}});var r=n(68575);let s=()=>(0,r.I0)(),i=r.v9},9074:function(e,t,n){"use strict";n.d(t,{D:function(){return l}});var r=n(57437),s=n(62869),i=n(94508);function l(e){let{children:t,className:n,...l}=e;return(0,r.jsx)(s.z,{className:(0,i.cn)("bg-[#0066FF] hover:bg-[#0066FF]/90 text-white",n),...l,children:t})}},62869:function(e,t,n){"use strict";n.d(t,{z:function(){return c}});var r=n(57437),s=n(2265),i=n(37053),l=n(90535),a=n(94508);let o=(0,l.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=s.forwardRef((e,t)=>{let{className:n,variant:s,size:l,asChild:c=!1,...u}=e,d=c?i.g7:"button";return(0,r.jsx)(d,{className:(0,a.cn)(o({variant:s,size:l,className:n})),ref:t,...u})});c.displayName="Button"},90535:function(e,t,n){"use strict";n.d(t,{j:function(){return l}});var r=n(61994);let s=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,i=r.W,l=(e,t)=>n=>{var r;if((null==t?void 0:t.variants)==null)return i(e,null==n?void 0:n.class,null==n?void 0:n.className);let{variants:l,defaultVariants:a}=t,o=Object.keys(l).map(e=>{let t=null==n?void 0:n[e],r=null==a?void 0:a[e];if(null===t)return null;let i=s(t)||s(r);return l[e][i]}),c=n&&Object.entries(n).reduce((e,t)=>{let[n,r]=t;return void 0===r||(e[n]=r),e},{});return i(e,o,null==t?void 0:null===(r=t.compoundVariants)||void 0===r?void 0:r.reduce((e,t)=>{let{class:n,className:r,...s}=t;return Object.entries(s).every(e=>{let[t,n]=e;return Array.isArray(n)?n.includes({...a,...c}[t]):({...a,...c})[t]===n})?[...e,n,r]:e},[]),null==n?void 0:n.class,null==n?void 0:n.className)}}},function(e){e.O(0,[443,303,166,514,575,503,648,382,116,642,971,117,744],function(){return e(e.s=64718)}),_N_E=e.O()}]);