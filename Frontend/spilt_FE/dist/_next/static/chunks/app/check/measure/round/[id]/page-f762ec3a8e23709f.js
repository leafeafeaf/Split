(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[491],{79767:function(e,t,s){Promise.resolve().then(s.bind(s,27432))},27432:function(e,t,s){"use strict";s.d(t,{default:function(){return f}});var l=s(57437),a=s(2265),c=s(99376),i=s(92451);let n=(0,s(79205).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);var r=s(84028),d=s(65452),o=s(40133),x=s(66070),h=s(9074),m=s(29948),u=s(60431),p=s(26637),j=s(46444),v=s(14438);function f(e){var t;let{params:s}=e,f=(0,c.useRouter)(),b=(0,m.T)(),{currentSerial:N}=(0,m.C)(e=>e.device),{currentFrame:g,isLoading:y,error:w}=(0,m.C)(e=>e.frame),{user:C,highlightUpdateLoading:k}=(0,m.C)(e=>e.user),[A,E]=(0,a.useState)(!1),[S,D]=(0,a.useState)(!1);(0,a.useEffect)(()=>{if(!N){v.Am.error("No device connected"),f.push("/check");return}let e=Number.parseInt(s.id);return b((0,u.cJ)({serial:N,frameNum:e})),()=>{b((0,u.rX)())}},[N,s.id,b,f]);let Z=()=>f.back(),_=async()=>{if(null==g?void 0:g.video){E(!0);try{let e=document.createElement("a");e.href=g.video,e.download="frame-".concat(g.num,".mp4"),document.body.appendChild(e),e.click(),document.body.removeChild(e),v.Am.success("Video saved successfully!")}catch(e){v.Am.error("Failed to save video")}finally{E(!1)}}},F=async()=>{if(!(null==g?void 0:g.video)||!C){v.Am.error("No video available");return}try{let e=!!C.highlight;await b((0,p.Pb)({highlight:g.video,isUpdate:e})).unwrap(),v.Am.success("Highlight video ".concat(e?"updated":"set"," successfully!")),D(!1)}catch(e){"string"==typeof e?v.Am.error(e):v.Am.error("Failed to set highlight video"),console.error("Highlight update error:",e)}};return y?(0,l.jsx)("div",{className:"min-h-screen bg-[#161622] p-6 flex items-center justify-center",children:(0,l.jsx)("div",{className:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-[#0066FF] border-r-transparent"})}):w||!g?(0,l.jsxs)("div",{className:"min-h-screen bg-[#161622] p-6",children:[(0,l.jsx)("button",{onClick:Z,className:"text-white hover:text-[#A2A2A7] transition-colors",children:(0,l.jsx)(i.Z,{className:"h-8 w-8"})}),(0,l.jsx)("div",{className:"flex items-center justify-center h-[calc(100vh-100px)]",children:(0,l.jsx)(x.Card,{className:"p-6 bg-[#1E1E2D]",children:(0,l.jsx)("p",{className:"text-white",children:w||"Failed to load frame data"})})})]}):(0,l.jsxs)("div",{className:"min-h-screen bg-[#161622] p-6 pb-24",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,l.jsx)("button",{onClick:Z,className:"text-white hover:text-[#A2A2A7] transition-colors",children:(0,l.jsx)(i.Z,{className:"h-8 w-8"})}),(0,l.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,l.jsx)(r.default,{}),(0,l.jsx)(d.Z,{})]})]}),(0,l.jsxs)("div",{className:"max-w-2xl mx-auto space-y-8",children:[(0,l.jsxs)("h1",{className:"text-3xl font-bold text-white text-center",children:[g.num," Set"]}),(0,l.jsx)(o.AnalysisRadarChart,{data:{angle:g.elbowAngleScore,stability:g.armStabilityScore,speed:g.speed}}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsx)("h2",{className:"text-2xl text-white text-center font-medium",children:"Statistics"}),(0,l.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,l.jsxs)("div",{className:"bg-[#1E1E2D] p-4 rounded-lg",children:[(0,l.jsx)("p",{className:"text-[#9CB1D1] text-center text-sm",children:"Angle"}),(0,l.jsx)("p",{className:"text-2xl font-bold text-white text-center",children:g.elbowAngleScore})]}),(0,l.jsxs)("div",{className:"bg-[#1E1E2D] p-4 rounded-lg",children:[(0,l.jsx)("p",{className:"text-[#9CB1D1] text-center text-sm",children:"Stability"}),(0,l.jsx)("p",{className:"text-2xl font-bold text-white text-center",children:g.armStabilityScore})]}),(0,l.jsxs)("div",{className:"bg-[#1E1E2D] p-4 rounded-lg",children:[(0,l.jsx)("p",{className:"text-[#9CB1D1] text-center text-sm",children:"Speed"}),(0,l.jsx)("p",{className:"text-2xl font-bold text-white text-center",children:g.speed})]})]})]}),(0,l.jsx)(x.Card,{className:"bg-[#1E1E2D] p-6 mb-4",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("p",{className:"text-[#9CB1D1] text-xl mb-2",children:"Score"}),(0,l.jsx)("p",{className:"text-4xl font-bold text-white",children:g.poseScore})]})}),(0,l.jsx)(x.Card,{className:"bg-[#1E1E2D] p-6",children:(0,l.jsxs)("div",{className:"space-y-4 text-center",children:[(0,l.jsx)("p",{className:"text-red-500 text-xl mb-2",children:"AI Comment"}),(0,l.jsx)("p",{className:"text-white text-lg whitespace-pre-line",children:g.feedback&&("string"==typeof(t=g.feedback)?t.replace(/^\["|"\]$/g,"").split('","').map(e=>{let t=e.match(/오차: [-\d\.]+ %, (.+)/);return t?"".concat(t[1],"\n"):""}).join(""):t.map(e=>{let t=e.match(/오차: [-\d\.]+ %, (.+)/);return t?"".concat(t[1],"\n"):""}).join(""))})]})}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsx)("h2",{className:"text-2xl text-white text-center font-medium",children:"Highlight"}),(0,l.jsxs)(x.Card,{className:"bg-[#1E1E2D] p-6 space-y-4",children:[(0,l.jsx)("div",{className:"aspect-video rounded-lg overflow-hidden bg-black",children:(0,l.jsx)("video",{src:g.video,controls:!0,className:"w-full h-full object-contain"})}),(0,l.jsxs)(h.D,{onClick:_,disabled:A,className:"w-full",children:[A?"Saving...":"Save Video",(0,l.jsx)(n,{className:"ml-2 h-4 w-4"})]})]})]}),(0,l.jsx)(h.D,{onClick:()=>{D(!0)},disabled:k,className:"w-full py-4",children:k?(0,l.jsxs)("div",{className:"flex items-center justify-center",children:[(0,l.jsx)("div",{className:"mr-2",children:"Setting..."}),(0,l.jsx)("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"})]}):(null==C?void 0:C.highlight)?"하이라이트 영상 수정":"하이라이트 영상 지정"})]}),(0,l.jsx)(j.A,{isOpen:S,onClose:()=>D(!1),onConfirm:F})]})}},92451:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});let l=(0,s(79205).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])}},function(e){e.O(0,[443,181,166,540,575,546,51,144,116,969,971,117,744],function(){return e(e.s=79767)}),_N_E=e.O()}]);