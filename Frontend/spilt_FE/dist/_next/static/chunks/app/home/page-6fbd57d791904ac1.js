(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[951],{77910:function(e,t,l){Promise.resolve().then(l.bind(l,73029))},73029:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return g}});var n=l(57437),r=l(55775),a=l.n(r),s=l(2265),o=l(62146);let i=a()(()=>Promise.all([l.e(166),l.e(28)]).then(l.bind(l,84028)),{loadableGenerated:{webpack:()=>[84028]},ssr:!1}),d=a()(()=>Promise.all([l.e(181),l.e(166),l.e(540),l.e(503),l.e(188),l.e(993)]).then(l.bind(l,22993)).then(e=>e.UserMenu),{loadableGenerated:{webpack:()=>[22993]},ssr:!1}),c=a()(()=>Promise.all([l.e(448),l.e(711)]).then(l.bind(l,61711)).then(e=>e.NavigationBar),{loadableGenerated:{webpack:()=>[61711]},ssr:!1}),u=a()(()=>Promise.all([l.e(546),l.e(51),l.e(714)]).then(l.bind(l,40133)).then(e=>e.AnalysisRadarChart),{loadableGenerated:{webpack:()=>[40133]},ssr:!1}),f=a()(()=>Promise.all([l.e(181),l.e(546),l.e(14),l.e(147),l.e(428)]).then(l.bind(l,41428)).then(e=>e.ScoreChart),{loadableGenerated:{webpack:()=>[41428]},ssr:!1}),b=a()(()=>l.e(112).then(l.bind(l,31112)).then(e=>e.StatsSection),{loadableGenerated:{webpack:()=>[31112]},ssr:!1}),h=a()(()=>l.e(915).then(l.bind(l,39915)).then(e=>e.BowlingStats),{loadableGenerated:{webpack:()=>[39915]},ssr:!1}),m=a()(()=>l.e(70).then(l.bind(l,66070)).then(e=>e.Card),{loadableGenerated:{webpack:()=>[66070]},ssr:!1}),p=e=>{let{videoUrl:t,nickname:l}=e,r=async()=>{try{let e=await fetch(t);if(!e.ok)throw Error("Network response was not ok");let n=await e.blob(),r=URL.createObjectURL(n),a=document.createElement("a");a.href=r,a.download="highlight-".concat(l,".mp4"),document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(r)}catch(e){console.error("Download error:",e)}};return(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)("div",{className:"relative aspect-video rounded-lg overflow-hidden",children:(0,n.jsx)("video",{src:t,controls:!0,className:"w-full h-full",preload:"metadata"})}),(0,n.jsx)("button",{onClick:r,className:"w-full py-2 px-4 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Download"})]})};function g(){let{user:e,isLoading:t,fetchUser:l}=(0,o.L)();return((0,s.useEffect)(()=>{l()},[l]),t)?(0,n.jsxs)("div",{className:"min-h-screen bg-[#161622] p-6 pb-24",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,n.jsx)(i,{}),(0,n.jsx)(d,{})]}),(0,n.jsx)("div",{className:"flex items-center justify-center h-[calc(100vh-200px)]",children:(0,n.jsx)("div",{className:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-[#0066FF] border-r-transparent"})})]}):e?(0,n.jsxs)("div",{className:"min-h-screen bg-[#161622] p-6 pb-24",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,n.jsx)(i,{}),(0,n.jsx)(d,{})]}),(0,n.jsxs)("div",{className:"space-y-6 max-w-md mx-auto",children:[(0,n.jsx)(u,{data:{angle:e.elbowAngleScore,stability:e.armStabilityScore,speed:e.armSpeedScore}}),(0,n.jsx)(f,{}),(0,n.jsx)(b,{scoreStats:[{label:"Average Score",value:e.totalPoseAvgscore.toFixed(1),color:"#2D3EF9"},{label:"High Score",value:e.totalPoseHighscore.toFixed(1),color:"#2D3EF9"}],performanceStats:[{label:"Angle",value:e.elbowAngleScore.toFixed(1),color:"#9CB1D1"},{label:"Stability",value:e.armStabilityScore.toFixed(1),color:"#9CB1D1"},{label:"Speed",value:e.armSpeedScore.toFixed(1),color:"#9CB1D1"}]}),(0,n.jsx)(h,{stats:[{label:"Average Score",value:e.avgBowlingScore.toString(),color:"#ECE929"},{label:"Current Score",value:e.currBowlingScore.toString(),color:"#ECE929"}]}),(0,n.jsx)(p,{videoUrl:e.highlight,nickname:e.nickname})]}),(0,n.jsx)(c,{})]}):(0,n.jsxs)("div",{className:"min-h-screen bg-[#161622] p-6 pb-24",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,n.jsx)(i,{}),(0,n.jsx)(d,{})]}),(0,n.jsx)("div",{className:"flex items-center justify-center h-[calc(100vh-200px)]",children:(0,n.jsx)(m,{className:"p-6 bg-[#1E1E2D]",children:(0,n.jsx)("p",{className:"text-white",children:"Failed to load user data. Please try again later."})})})]})}},62146:function(e,t,l){"use strict";l.d(t,{L:function(){return s}});var n=l(3011),r=l(29116),a=l(14438);let s=(0,n.U)(e=>({user:null,isLoading:!1,fetchUser:async()=>{e({isLoading:!0});try{let t=await r.Z.get("user");"SUCCESS"===t.data.code&&e({user:t.data.data})}catch(e){var t,l;(null===(t=e.response)||void 0===t?void 0:t.status)===404?a.Am.error("User not found"):(null===(l=e.response)||void 0===l?void 0:l.status)===401||a.Am.error("Failed to fetch user data")}finally{e({isLoading:!1})}},logout:async()=>{e({isLoading:!0});try{let t=await r.Z.post("logout");"SUCCESS"===t.data.code&&(e({user:null}),a.Am.success("Successfully logged out"),window.location.href="/login")}catch(t){a.Am.error("Failed to logout"),e({user:null}),window.location.href="/login"}finally{e({isLoading:!1})}}}))},55775:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a}});let n=l(47043);l(57437),l(2265);let r=n._(l(15602));function a(e,t){var l;let n={loading:e=>{let{error:t,isLoading:l,pastDelay:n}=e;return null}};"function"==typeof e&&(n.loader=e);let a={...n,...t};return(0,r.default)({...a,modules:null==(l=a.loadableGenerated)?void 0:l.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},81523:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return r}});let n=l(18993);function r(e){let{reason:t,children:l}=e;if("undefined"==typeof window)throw new n.BailoutToCSRError(t);return l}},15602:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return d}});let n=l(57437),r=l(2265),a=l(81523),s=l(70049);function o(e){return{default:e&&"default"in e?e.default:e}}let i={loader:()=>Promise.resolve(o(()=>null)),loading:null,ssr:!0},d=function(e){let t={...i,...e},l=(0,r.lazy)(()=>t.loader().then(o)),d=t.loading;function c(e){let o=d?(0,n.jsx)(d,{isLoading:!0,pastDelay:!0,error:null}):null,i=t.ssr?(0,n.jsxs)(n.Fragment,{children:["undefined"==typeof window?(0,n.jsx)(s.PreloadCss,{moduleIds:t.modules}):null,(0,n.jsx)(l,{...e})]}):(0,n.jsx)(a.BailoutToCSR,{reason:"next/dynamic",children:(0,n.jsx)(l,{...e})});return(0,n.jsx)(r.Suspense,{fallback:o,children:i})}return c.displayName="LoadableComponent",c}},70049:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadCss",{enumerable:!0,get:function(){return a}});let n=l(57437),r=l(20544);function a(e){let{moduleIds:t}=e;if("undefined"!=typeof window)return null;let l=(0,r.getExpectedRequestStore)("next/dynamic css"),a=[];if(l.reactLoadableManifest&&t){let e=l.reactLoadableManifest;for(let l of t){if(!e[l])continue;let t=e[l].files.filter(e=>e.endsWith(".css"));a.push(...t)}}return 0===a.length?null:(0,n.jsx)(n.Fragment,{children:a.map(e=>(0,n.jsx)("link",{precedence:"dynamic",rel:"stylesheet",href:l.assetPrefix+"/_next/"+encodeURI(e),as:"style"},e))})}},3011:function(e,t,l){"use strict";l.d(t,{U:function(){return i}});var n=l(2265);let r=e=>{let t;let l=new Set,n=(e,n)=>{let r="function"==typeof e?e(t):e;if(!Object.is(r,t)){let e=t;t=(null!=n?n:"object"!=typeof r||null===r)?r:Object.assign({},t,r),l.forEach(l=>l(t,e))}},r=()=>t,a={setState:n,getState:r,getInitialState:()=>s,subscribe:e=>(l.add(e),()=>l.delete(e))},s=t=e(n,r,a);return a},a=e=>e?r(e):r,s=e=>e,o=e=>{let t=a(e),l=e=>(function(e,t=s){let l=n.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return n.useDebugValue(l),l})(t,e);return Object.assign(l,t),l},i=e=>e?o(e):o}},function(e){e.O(0,[443,116,971,117,744],function(){return e(e.s=77910)}),_N_E=e.O()}]);