(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[951],{77910:function(e,t,s){Promise.resolve().then(s.bind(s,42075))},42075:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return z}});var a=s(57437),i=s(2265),r=s(84028),l=s(22993),n=s(61711),c=s(40133),o=s(64014),d=s(92451),x=s(10407),h=s(47625),m=s(21156),u=s(56940),g=s(97059),f=s(62994),v=s(8147),b=s(54061),j=s(66070),p=s(62869),w=s(3011),N=s(29116),y=s(14438);let S=(0,w.U)(e=>({games:[],isLoading:!1,fetchGames:async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;e({isLoading:!0});try{let s=await N.Z.get("game",{params:{count:t}});if("SUCCESS"===s.data.code){let t=s.data.data.gameArr.sort((e,t)=>new Date(t.gameDate).getTime()-new Date(e.gameDate).getTime());e({games:t})}}catch(e){var s,a;(null===(s=e.response)||void 0===s?void 0:s.status)===404?"GAME_ALREADY_DELETED"===e.response.data.code&&y.Am.error("Game results have already been viewed and deleted"):(null===(a=e.response)||void 0===a?void 0:a.status)===401||y.Am.error("Failed to fetch game data")}finally{e({isLoading:!1})}}}));function k(){let[e,t]=(0,i.useState)(0),{games:s,isLoading:r,fetchGames:l}=S();(0,i.useEffect)(()=>{l(10)},[l]);let n=s.map(e=>({date:e.gameDate,score:e.poseAvgscore})),c=Math.max(0,n.length-6),w=n.slice(e,e+6);return r?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h2",{className:"text-2xl text-white text-center font-medium",children:"Score Statistics"}),(0,a.jsx)(j.Z,{className:"p-6 bg-[#1E1E2D] h-[300px] flex items-center justify-center",children:(0,a.jsx)("div",{className:"inline-block h-6 w-6 animate-spin rounded-full border-2 border-[#0066FF] border-t-transparent"})})]}):0===s.length?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h2",{className:"text-2xl text-white text-center font-medium",children:"Score Statistics"}),(0,a.jsx)(j.Z,{className:"p-6 bg-[#1E1E2D] h-[300px] flex items-center justify-center text-[#A2A2A7]",children:"No game data available"})]}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h2",{className:"text-2xl text-white text-center font-medium",children:"Score Statistics"}),(0,a.jsxs)(j.Z,{className:"py-6 pr-8 pl-2 bg-[#1E1E2D] relative h-[300px]",children:[(0,a.jsx)(h.h,{width:"100%",height:"100%",children:(0,a.jsxs)(m.w,{data:w,margin:{top:20,right:20,bottom:20,left:20},children:[(0,a.jsx)(u.q,{stroke:"rgba(255,255,255,0.1)",vertical:!1}),(0,a.jsx)(g.K,{dataKey:"date",stroke:"white",tickLine:!1,axisLine:!1,tick:{fill:"white",fontSize:12},tickFormatter:e=>(0,o.WU)(new Date(e),"MM-dd")}),(0,a.jsx)(f.B,{stroke:"white",tickLine:!1,axisLine:!1,tick:{fill:"white",fontSize:12},domain:[0,100],ticks:[0,25,50,75,100]}),(0,a.jsx)(v.u,{content:(0,a.jsx)(e=>{let{active:t,payload:s}=e;return t&&s&&s.length?(0,a.jsxs)("div",{className:"bg-[#1E1E2D] px-3 py-2 rounded-lg border border-[#2E2E3D] shadow-lg",children:[(0,a.jsx)("p",{className:"text-white",children:(0,o.WU)(new Date(s[0].payload.date),"MM-dd")}),(0,a.jsxs)("p",{className:"text-[#0066FF] font-bold",children:["Score: ",s[0].value.toFixed(1)]})]}):null},{})}),(0,a.jsx)(b.x,{type:"monotone",dataKey:"score",stroke:"#0066FF",strokeWidth:3,dot:{fill:"white",stroke:"#0066FF",strokeWidth:2,r:4},activeDot:{fill:"#0066FF",stroke:"white",strokeWidth:2,r:6}})]})}),(0,a.jsxs)("div",{className:"absolute inset-x-0 bottom-0 flex justify-between px-4 pb-2",children:[(0,a.jsx)(p.z,{variant:"ghost",size:"icon",onClick:()=>{t(Math.max(0,e-1))},disabled:0===e,className:"text-white hover:bg-white/10",children:(0,a.jsx)(d.Z,{className:"h-4 w-4"})}),(0,a.jsx)(p.z,{variant:"ghost",size:"icon",onClick:()=>{t(Math.min(c,e+1))},disabled:e>=c,className:"text-white hover:bg-white/10",children:(0,a.jsx)(x.Z,{className:"h-4 w-4"})})]})]})]})}function E(e){let{label:t,value:s,color:i}=e;return(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)("span",{className:"text-1xl font-medium mb-2",style:{color:i},children:t}),(0,a.jsx)("span",{className:"text-3xl font-bold text-white",children:s})]})}function F(e){let{items:t}=e;return(0,a.jsx)(j.Z,{className:"bg-[#1E1E2D] p-6",children:(0,a.jsx)("div",{className:"grid grid-cols-2 gap-8",children:t.map((e,t)=>(0,a.jsx)(E,{...e},t))})})}function D(e){let{items:t}=e;return(0,a.jsx)(j.Z,{className:"bg-[#1E1E2D] p-6",children:(0,a.jsx)("div",{className:"grid grid-cols-3 gap-8",children:t.map((e,t)=>(0,a.jsx)(E,{...e},t))})})}function A(e){let{scoreStats:t,performanceStats:s}=e;return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h2",{className:"text-2xl text-white text-center font-medium",children:"Statistics"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(F,{items:t}),(0,a.jsx)(D,{items:s})]})]})}function C(e){let{stats:t}=e;return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h2",{className:"text-2xl text-white text-center font-medium",children:"Bowling Statistics"}),(0,a.jsx)(j.Z,{className:"bg-[#1E1E2D] p-6",children:(0,a.jsx)("div",{className:"grid grid-cols-2 gap-8",children:t.map((e,t)=>(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)("span",{className:"text-1xl font-medium mb-2",style:{color:e.color},children:e.label}),(0,a.jsx)("span",{className:"text-3xl font-bold text-white",children:e.value})]},t))})})]})}var Z=s(62146);let L=e=>{let{videoUrl:t,onDownload:s}=e;return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"relative aspect-video rounded-lg overflow-hidden",children:(0,a.jsx)("video",{src:t,controls:!0,className:"w-full h-full",preload:"metadata"})}),(0,a.jsx)("button",{onClick:s,className:"w-full py-2 px-4 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Download"})]})};function z(){let{user:e,isLoading:t,fetchUser:s}=(0,Z.L)();return((0,i.useEffect)(()=>{s()},[s]),t)?(0,a.jsxs)("div",{className:"min-h-screen bg-[#161622] p-6 pb-24",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,a.jsx)(r.Z,{}),(0,a.jsx)(l.I,{})]}),(0,a.jsx)("div",{className:"flex items-center justify-center h-[calc(100vh-200px)]",children:(0,a.jsx)("div",{className:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-[#0066FF] border-r-transparent"})})]}):e?(0,a.jsxs)("div",{className:"min-h-screen bg-[#161622] p-6 pb-24",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,a.jsx)(r.Z,{}),(0,a.jsx)(l.I,{})]}),(0,a.jsxs)("div",{className:"space-y-6 max-w-md mx-auto",children:[(0,a.jsx)(c.x,{data:{angle:e.elbowAngleScore,stability:e.armStabilityScore,speed:e.armSpeedScore}}),(0,a.jsx)(k,{}),(0,a.jsx)(A,{scoreStats:[{label:"Average Score",value:e.totalPoseAvgscore.toFixed(1),color:"#2D3EF9"},{label:"High Score",value:e.totalPoseHighscore.toFixed(1),color:"#2D3EF9"}],performanceStats:[{label:"Angle",value:e.elbowAngleScore.toFixed(1),color:"#9CB1D1"},{label:"Stability",value:e.armStabilityScore.toFixed(1),color:"#9CB1D1"},{label:"Speed",value:e.armSpeedScore.toFixed(1),color:"#9CB1D1"}]}),(0,a.jsx)(C,{stats:[{label:"Average Score",value:e.avgBowlingScore.toString(),color:"#ECE929"},{label:"Current Score",value:e.currBowlingScore.toString(),color:"#ECE929"}]}),(0,a.jsx)(L,{videoUrl:e.highlight,onDownload:()=>{let t=document.createElement("a");t.href=e.highlight,t.download="highlight-".concat(e.nickname,".mp4"),document.body.appendChild(t),t.click(),document.body.removeChild(t)}})]}),(0,a.jsx)(n.v,{})]}):(0,a.jsxs)("div",{className:"min-h-screen bg-[#161622] p-6 pb-24",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,a.jsx)(r.Z,{}),(0,a.jsx)(l.I,{})]}),(0,a.jsx)("div",{className:"flex items-center justify-center h-[calc(100vh-200px)]",children:(0,a.jsx)(j.Z,{className:"p-6 bg-[#1E1E2D]",children:(0,a.jsx)("p",{className:"text-white",children:"Failed to load user data. Please try again later."})})})]})}},40133:function(e,t,s){"use strict";s.d(t,{x:function(){return d}});var a=s(57437),i=s(47625),r=s(60829),l=s(39366),n=s(93019),c=s(90597),o=s(66070);function d(e){let{data:t}=e,s=[{subject:"Speed",value:t.speed},{subject:"Stability",value:t.stability},{subject:"Angle",value:t.angle}];return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h2",{className:"text-2xl text-white text-center font-medium",children:"Analysis Graph"}),(0,a.jsx)(o.Z,{className:"p-4 sm:p-6 bg-[#1E1E2D] aspect-square relative overflow-hidden",children:(0,a.jsx)(i.h,{width:"100%",height:"100%",children:(0,a.jsxs)(r.H,{data:s,margin:{top:20,right:30,bottom:20,left:30},outerRadius:"60%",children:[(0,a.jsx)(l.n,{gridType:"circle",stroke:"rgba(255, 255, 255, 0.1)",strokeWidth:1,radialLines:!1}),(0,a.jsx)(n.I,{dataKey:"subject",tick:e=>{let{x:t,y:s,payload:i}=e,r=0,l=0;switch(i.value){case"Speed":l=-10;break;case"Angle":r=-20,l=20;break;case"Stability":r=20,l=20}return(0,a.jsx)("g",{transform:"translate(".concat(t,",").concat(s,")"),children:(0,a.jsx)("text",{x:r,y:0,dy:l,textAnchor:"middle",fill:"white",fontSize:14,fontWeight:500,children:i.value})})},axisLine:!1,tickLine:!1}),(0,a.jsx)(c.F,{name:"Stats",dataKey:"value",stroke:"#0066FF",strokeWidth:2,fill:"#0066FF",fillOpacity:.15,dot:e=>{let{cx:t,cy:s}=e;return(0,a.jsx)("g",{children:(0,a.jsx)("circle",{cx:t,cy:s,r:4,fill:"white",stroke:"#0066FF",strokeWidth:2})})}})]})})})]})}},62869:function(e,t,s){"use strict";s.d(t,{z:function(){return o}});var a=s(57437),i=s(2265),r=s(37053),l=s(90535),n=s(94508);let c=(0,l.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=i.forwardRef((e,t)=>{let{className:s,variant:i,size:l,asChild:o=!1,...d}=e,x=o?r.g7:"button";return(0,a.jsx)(x,{className:(0,n.cn)(c({variant:i,size:l,className:s})),ref:t,...d})});o.displayName="Button"},66070:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var a=s(57437);function i(e){let{children:t,className:s=""}=e;return(0,a.jsx)("div",{className:"bg-[#1E1E2D] rounded-lg p-4 ".concat(s),children:t})}}},function(e){e.O(0,[443,303,166,514,503,648,382,719,14,467,116,642,971,117,744],function(){return e(e.s=77910)}),_N_E=e.O()}]);