(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[951],{77910:function(e,t,s){Promise.resolve().then(s.bind(s,76657))},76657:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return W}});var i=s(57437),a=s(2265),r=s(84028),l=s(22993),n=s(61711),c=s(40133),o=s(64014),d=s(92451),x=s(10407),h=s(47625),m=s(21156),u=s(56940),f=s(97059),g=s(62994),j=s(8147),v=s(54061),b=s(66070),p=s(62869),N=s(3011),w=s(29116),y=s(14438);let E=(0,N.U)(e=>({games:[],isLoading:!1,fetchGames:async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;e({isLoading:!0});try{let s=await w.Z.get("game",{params:{count:t}});if("SUCCESS"===s.data.code){let t=s.data.data.gameArr.sort((e,t)=>new Date(t.gameDate).getTime()-new Date(e.gameDate).getTime());e({games:t})}}catch(e){var s,i;(null===(s=e.response)||void 0===s?void 0:s.status)===404?"GAME_ALREADY_DELETED"===e.response.data.code&&y.Am.error("Game results have already been viewed and deleted"):(null===(i=e.response)||void 0===i?void 0:i.status)===401||y.Am.error("Failed to fetch game data")}finally{e({isLoading:!1})}}}));function S(){let[e,t]=(0,a.useState)(0),{games:s,isLoading:r,fetchGames:l}=E();(0,a.useEffect)(()=>{l(10)},[l]);let n=s.map(e=>({date:e.gameDate,score:e.poseAvgscore})),c=Math.max(0,n.length-6),N=n.slice(e,e+6);return r?(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)("h2",{className:"text-2xl text-white text-center font-medium",children:"Score Statistics"}),(0,i.jsx)(b.Z,{className:"p-6 bg-[#1E1E2D] h-[300px] flex items-center justify-center",children:(0,i.jsx)("div",{className:"inline-block h-6 w-6 animate-spin rounded-full border-2 border-[#0066FF] border-t-transparent"})})]}):0===s.length?(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)("h2",{className:"text-2xl text-white text-center font-medium",children:"Score Statistics"}),(0,i.jsx)(b.Z,{className:"p-6 bg-[#1E1E2D] h-[300px] flex items-center justify-center text-[#A2A2A7]",children:"No game data available"})]}):(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)("h2",{className:"text-2xl text-white text-center font-medium",children:"Score Statistics"}),(0,i.jsxs)(b.Z,{className:"p-6 bg-[#1E1E2D] relative h-[300px]",children:[(0,i.jsx)(h.h,{width:"100%",height:"100%",children:(0,i.jsxs)(m.w,{data:N,margin:{top:20,right:20,bottom:20,left:20},children:[(0,i.jsx)(u.q,{stroke:"rgba(255,255,255,0.1)",vertical:!1}),(0,i.jsx)(f.K,{dataKey:"date",stroke:"white",tickLine:!1,axisLine:!1,tick:{fill:"white",fontSize:12},tickFormatter:e=>(0,o.WU)(new Date(e),"MM-dd")}),(0,i.jsx)(g.B,{stroke:"white",tickLine:!1,axisLine:!1,tick:{fill:"white",fontSize:12},domain:[0,100],ticks:[0,25,50,75,100]}),(0,i.jsx)(j.u,{content:(0,i.jsx)(e=>{let{active:t,payload:s}=e;return t&&s&&s.length?(0,i.jsxs)("div",{className:"bg-[#1E1E2D] px-3 py-2 rounded-lg border border-[#2E2E3D] shadow-lg",children:[(0,i.jsx)("p",{className:"text-white",children:(0,o.WU)(new Date(s[0].payload.date),"MM-dd")}),(0,i.jsxs)("p",{className:"text-[#0066FF] font-bold",children:["Score: ",s[0].value.toFixed(1)]})]}):null},{})}),(0,i.jsx)(v.x,{type:"monotone",dataKey:"score",stroke:"#0066FF",strokeWidth:3,dot:{fill:"white",stroke:"#0066FF",strokeWidth:2,r:4},activeDot:{fill:"#0066FF",stroke:"white",strokeWidth:2,r:6}})]})}),(0,i.jsxs)("div",{className:"absolute inset-x-0 bottom-0 flex justify-between px-4 pb-2",children:[(0,i.jsx)(p.z,{variant:"ghost",size:"icon",onClick:()=>{t(Math.max(0,e-1))},disabled:0===e,className:"text-white hover:bg-white/10",children:(0,i.jsx)(d.Z,{className:"h-4 w-4"})}),(0,i.jsx)(p.z,{variant:"ghost",size:"icon",onClick:()=>{t(Math.min(c,e+1))},disabled:e>=c,className:"text-white hover:bg-white/10",children:(0,i.jsx)(x.Z,{className:"h-4 w-4"})})]})]})]})}function k(e){let{label:t,value:s,color:a}=e;return(0,i.jsxs)("div",{className:"flex flex-col items-center",children:[(0,i.jsx)("span",{className:"text-2xl font-medium mb-2",style:{color:a},children:t}),(0,i.jsx)("span",{className:"text-4xl font-bold text-white",children:s})]})}function F(e){let{items:t}=e;return(0,i.jsx)(b.Z,{className:"bg-[#1E1E2D] p-6",children:(0,i.jsx)("div",{className:"grid grid-cols-2 gap-8",children:t.map((e,t)=>(0,i.jsx)(k,{...e},t))})})}function D(e){let{items:t}=e;return(0,i.jsx)(b.Z,{className:"bg-[#1E1E2D] p-6",children:(0,i.jsx)("div",{className:"grid grid-cols-3 gap-8",children:t.map((e,t)=>(0,i.jsx)(k,{...e},t))})})}function A(e){let{scoreStats:t,performanceStats:s}=e;return(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)("h2",{className:"text-2xl text-white text-center font-medium",children:"Statistics"}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)(F,{items:t}),(0,i.jsx)(D,{items:s})]})]})}function Z(e){let{stats:t}=e;return(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)("h2",{className:"text-2xl text-white text-center font-medium",children:"Bowling Statistics"}),(0,i.jsx)(b.Z,{className:"bg-[#1E1E2D] p-6",children:(0,i.jsx)("div",{className:"grid grid-cols-2 gap-8",children:t.map((e,t)=>(0,i.jsxs)("div",{className:"flex flex-col items-center",children:[(0,i.jsx)("span",{className:"text-2xl font-medium mb-2",style:{color:e.color},children:e.label}),(0,i.jsx)("span",{className:"text-5xl font-bold text-white",children:e.value})]},t))})})]})}var C=s(92735),L=s(9074);function z(e){let{videoUrl:t,onDownload:s}=e;return(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)("h2",{className:"text-2xl text-white text-center font-medium",children:"Highlight"}),(0,i.jsxs)(b.Z,{className:"bg-[#1E1E2D]",children:[(0,i.jsx)("div",{className:"relative aspect-video rounded-lg overflow-hidden",children:(0,i.jsx)("video",{src:t,controls:!0,className:"w-full h-full object-cover"})}),(0,i.jsx)("div",{className:"mt-4 flex justify-end p-4",children:(0,i.jsxs)(L.D,{onClick:s,children:[(0,i.jsx)(C.Z,{className:"w-4 h-4 mr-2"}),"Download"]})})]})]})}var _=s(62146);function W(){let{user:e,isLoading:t,fetchUser:s}=(0,_.L)();return((0,a.useEffect)(()=>{s()},[s]),t)?(0,i.jsxs)("div",{className:"min-h-screen bg-[#161622] p-6 pb-24",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,i.jsx)(r.Z,{}),(0,i.jsx)(l.I,{})]}),(0,i.jsx)("div",{className:"flex items-center justify-center h-[calc(100vh-200px)]",children:(0,i.jsx)("div",{className:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-[#0066FF] border-r-transparent"})})]}):e?(0,i.jsxs)("div",{className:"min-h-screen bg-[#161622] p-6 pb-24",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,i.jsx)(r.Z,{}),(0,i.jsx)(l.I,{})]}),(0,i.jsxs)("div",{className:"space-y-6 max-w-md mx-auto",children:[(0,i.jsx)(c.x,{data:{angle:e.elbowAngleScore,stability:e.armStabilityScore,speed:e.armSpeedScore}}),(0,i.jsx)(S,{}),(0,i.jsx)(A,{scoreStats:[{label:"Average Score",value:e.totalPoseAvgscore.toFixed(1),color:"#2D3EF9"},{label:"High Score",value:e.totalPoseHighscore.toFixed(1),color:"#2D3EF9"}],performanceStats:[{label:"Angle",value:e.elbowAngleScore.toFixed(1),color:"#9CB1D1"},{label:"Stability",value:e.armStabilityScore.toFixed(1),color:"#9CB1D1"},{label:"Speed",value:e.armSpeedScore.toFixed(1),color:"#9CB1D1"}]}),(0,i.jsx)(Z,{stats:[{label:"Average Score",value:e.avgBowlingScore.toString(),color:"#ECE929"},{label:"Current Score",value:e.currBowlingScore.toString(),color:"#ECE929"}]}),(0,i.jsx)(z,{videoUrl:e.highlight,onDownload:()=>{let t=document.createElement("a");t.href=e.highlight,t.download="highlight-".concat(e.nickname,".mp4"),document.body.appendChild(t),t.click(),document.body.removeChild(t)}})]}),(0,i.jsx)(n.v,{})]}):(0,i.jsxs)("div",{className:"min-h-screen bg-[#161622] p-6 pb-24",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,i.jsx)(r.Z,{}),(0,i.jsx)(l.I,{})]}),(0,i.jsx)("div",{className:"flex items-center justify-center h-[calc(100vh-200px)]",children:(0,i.jsx)(b.Z,{className:"p-6 bg-[#1E1E2D]",children:(0,i.jsx)("p",{className:"text-white",children:"Failed to load user data. Please try again later."})})})]})}},40133:function(e,t,s){"use strict";s.d(t,{x:function(){return d}});var i=s(57437),a=s(47625),r=s(60829),l=s(39366),n=s(93019),c=s(90597),o=s(66070);function d(e){let{data:t}=e,s=[{subject:"Speed",value:t.speed},{subject:"Stability",value:t.stability},{subject:"Angle",value:t.angle}];return(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)("h2",{className:"text-2xl text-white text-center font-medium",children:"Analysis Graph"}),(0,i.jsx)(o.Z,{className:"p-6 bg-[#1E1E2D] aspect-square relative overflow-hidden",children:(0,i.jsx)(a.h,{width:"100%",height:"100%",children:(0,i.jsxs)(r.H,{data:s,children:[(0,i.jsx)(l.n,{gridType:"circle",stroke:"rgba(255, 255, 255, 0.1)",strokeWidth:1,radialLines:!1}),(0,i.jsx)(n.I,{dataKey:"subject",tick:{fill:"white",fontSize:16,fontWeight:500},axisLine:!1,tickLine:!1}),(0,i.jsx)(c.F,{name:"Stats",dataKey:"value",stroke:"#0066FF",strokeWidth:2,fill:"#0066FF",fillOpacity:.15,dot:e=>{let{cx:t,cy:s}=e;return(0,i.jsx)("g",{children:(0,i.jsx)("circle",{cx:t,cy:s,r:4,fill:"white",stroke:"#0066FF",strokeWidth:2})})}})]})})})]})}},9074:function(e,t,s){"use strict";s.d(t,{D:function(){return l}});var i=s(57437),a=s(62869),r=s(94508);function l(e){let{children:t,className:s,...l}=e;return(0,i.jsx)(a.z,{className:(0,r.cn)("bg-[#0066FF] hover:bg-[#0066FF]/90 text-white",s),...l,children:t})}},62869:function(e,t,s){"use strict";s.d(t,{z:function(){return o}});var i=s(57437),a=s(2265),r=s(37053),l=s(90535),n=s(94508);let c=(0,l.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=a.forwardRef((e,t)=>{let{className:s,variant:a,size:l,asChild:o=!1,...d}=e,x=o?r.g7:"button";return(0,i.jsx)(x,{className:(0,n.cn)(c({variant:a,size:l,className:s})),ref:t,...d})});o.displayName="Button"},66070:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});var i=s(57437);function a(e){let{children:t,className:s=""}=e;return(0,i.jsx)("div",{className:"bg-[#1E1E2D] rounded-lg p-4 ".concat(s),children:t})}}},function(e){e.O(0,[443,303,166,514,503,648,382,719,14,433,116,642,971,117,744],function(){return e(e.s=77910)}),_N_E=e.O()}]);